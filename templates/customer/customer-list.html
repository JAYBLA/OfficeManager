{% extends 'base.html' %}
{% load static %}

{% block title %}
     {{title}}
{% endblock title %}


{% block stylesheet %}
  <style>
    .table-buttons{
        background-color: #fff !important;
        padding: 5px;
        border-radius: 2px;
        font-size:18px;
    }

    div.dt-buttons {
        float: right;
        margin-left:10px;
    }
    .page-item.active .page-link {
    z-index: 3;
    color: #fff;
    background-color: #34495e;
    border-color: #95a5a6;
    }
  </style>
{% endblock stylesheet %}
  
    
{% block content %}
<div class="row mt-5">
  <div class="card"> 
      <div class="card-header d-flex  justify-content-end">
        <button id="create-customer" class="btn btn-outline-primary btn-lg" type="button" name="button">Add Customer</button>
      </div>
      <div class="card-body">
          <div class="table-responsive">
              <table class="table" id="customer-table">
                  <thead>
                    <tr>
                      <th scope="col">S/N</th>
                      <th scope="col">Name</th>
                      <th scope="col">Phone</th>
                      <th scope="col">Email</th>
                      <th scope="col">Physical Address</th>
                      <th scope="col">Actions</th>
                    </tr>
                  </thead>
                  
                  
                  <tbody>
                      {% for customer in customers %}
                    <tr>
                      <th>{{forloop.counter}}</th>
                      <td>{{customer.name}}</td>
                      <td>{{customer.phone}}</td>
                      <td>{{customer.email}}</td>
                      <td>{{customer.physical_address}}</td>
                      <td class="text-center">
                          <a class="update-customer bs-modal mr-2" data-form-url="{% url 'invoice:update-customer' customer.id %}" style="cursor:pointer;font-size: 22px">
                            <i class="fa fa-edit text-warning"></i>
                          </a>

                          <a class="delete-customer bs-modal mr-2" data-form-url="{% url 'invoice:delete_customer' customer.id %}">
                              <i class="fa fa-trash text-danger" style="font-size: 22px; cursor:pointer;"></i>
                          </a>                               
                      </td>
                    </tr>     
                    {% endfor %}         
                  </tbody>                        
                </table>
          </div>
      </div>
  </div>
</div>
<!-- Modal 1 with id="create-book"-->
<div class="modal fade" id="create-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
      </div>
    </div>
  </div>
  
  <!-- Modal 2 with id="modal" -->
  <div class="modal fade" tabindex="-1" role="dialog" id="modal">
    <div class="modal-dialog" role="document">
      <div class="modal-content"></div>
    </div>
  </div>
{% endblock content %}


{% block javascript %}
<script>
  $(document).ready(function() {
  var table = $('#customer-table').DataTable( {
  dom: 'Bfrtip',
      buttons: ['excel', 'pdf','print'],
      initComplete: function() {
      $('.buttons-excel').html('<i class="fa table-buttons fa-file-excel-o text-success"/>')
      $('.buttons-pdf').html('<i class="fa table-buttons fa-file-pdf-o text-danger"/>')
      $('.buttons-print').html('<i class="fa table-buttons fa-print text-dark"/>')
      }
  } );

  table.buttons().container()
      .appendTo( '#customer-table_wrapper .col-md-6:eq(0)' );

  
} );
</script>

<script>
    $(function () {  
      $(".delete-customer").each(function () {
          $(this).modalForm({formURL: $(this).data("form-url"), isDeleteForm: true});
      });
    });
    $("#create-customer").modalForm({
          formURL: "{% url 'invoice:customer_create' %}",
          modalID: "#create-modal"
      });
      $(".update-customer").each(function () {
        $(this).modalForm({
            formURL: $(this).data('form-url')
        });
      });
  </script>
{% endblock javascript %}
    
    
